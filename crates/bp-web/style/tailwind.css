@import "tailwindcss";

@theme {
  --font-sans: monospace;
  --font-mono: monospace;
}

/* Manpage / Paper aesthetic */
:root {
  --paper: #f8f6f1;
  --ink: #1a1a1a;
  --ink-light: #666;
  --link: #0066cc;
  --rule: #ccc;
  --skeleton: #ddd;
}

/* Dark mode */
@media (prefers-color-scheme: dark) {
  :root {
    --paper: #1a1a1a;
    --ink: #e8e6e1;
    --ink-light: #999;
    --link: #6db3f2;
    --rule: #444;
    --skeleton: #333;
  }
}

@layer base {
  html, body {
    background-color: var(--paper);
    font-family: monospace;
    font-size: 14px;
    line-height: 1.6;
    color: var(--ink);
    -webkit-font-smoothing: antialiased;
  }

  body {
    margin: 0;
  }
}

/* Links */
a {
  color: var(--link);
  text-decoration: underline;
  text-underline-offset: 2px;
}

a:hover {
  text-decoration-thickness: 2px;
}

/* Selection */
::selection {
  background-color: var(--ink);
  color: var(--paper);
}

/* Print styles */
@media print {
  body {
    background: white;
    color: black;
  }

  a {
    color: black;
  }
}

/* Section header animations */
@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

.animate-blink {
  animation: blink 1s step-end infinite;
}

@keyframes flow {
  0% { opacity: 0.4; }
  50% { opacity: 1; }
  100% { opacity: 0.4; }
}

.section-flow-line {
  animation: flow 2s ease-in-out infinite;
}

/* Ticker animation - discrete character-by-character scrolling */
/* Mimics the original React setInterval(400ms) behavior */

.ticker {
  /* Display window: matches original's ~20 visible characters */
  width: 20ch;
  overflow: hidden;
  display: inline-block;
  white-space: pre;
  line-height: 1;
}

.ticker__track {
  display: inline-block;
  white-space: pre;
  color: var(--ink-light);

  /* Animation: shift by full 64-char pattern for seamless loop */
  /* 64 chars Ã— 400ms = 25.6s per full cycle */
  animation: ticker-shift 25.6s steps(64, end) infinite;
}

/* Desynchronize left and right sides like independent React components */
.ticker__track--left {
  animation-delay: 0s;
}

.ticker__track--right {
  animation-delay: -7.2s;  /* Offset by ~18 steps to desync */
}

@keyframes ticker-shift {
  from { transform: translateX(0); }
  to { transform: translateX(-64ch); }  /* Shift by full pattern (64 chars) */
}

/* Skeleton loading animation */
@keyframes shimmer {
  0% { opacity: 0.4; }
  50% { opacity: 0.8; }
  100% { opacity: 0.4; }
}

.skeleton-line {
  color: var(--skeleton);
  animation: shimmer 1.5s ease-in-out infinite;
}

.skeleton-line:nth-child(2) { animation-delay: 0.15s; }
.skeleton-line:nth-child(3) { animation-delay: 0.3s; }
.skeleton-line:nth-child(4) { animation-delay: 0.45s; }
.skeleton-line:nth-child(5) { animation-delay: 0.6s; }
.skeleton-line:nth-child(6) { animation-delay: 0.75s; }

/* Section anchor hover indicator */
.section-anchor {
  opacity: 0;
  transition: opacity 0.15s ease;
  text-decoration: none !important;
  color: var(--ink-light) !important;
}

h2:hover .section-anchor {
  opacity: 1;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
